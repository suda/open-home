/*
ChocolateChip-UI
ChUI.js
Copyright 2014 Sourcebits www.sourcebits.com
License: MIT
Version: 3.5.1
*/

!function(a){"use strict";a.extend({Uuid:function(){return Date.now().toString(36)},concat:function(a){return a instanceof Array?a.join(""):[].slice.apply(arguments).join("")},forEach:function(a,b,c){function d(a){var b=a.length,c=jQuery.type(a);return"function"===c||jQuery.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var e,f=0,g=a.length,h=d(a);if(c){if(h){for(;g>f;f++)if(e=b.apply(a[f],c),e===!1)break}else for(f in a)if(e=b.apply(a[f],c),e===!1)break}else if(h){for(;g>f;f++)if(e=b.call(a[f],a[f],f),e===!1)break}else for(f in a)if(e=b.call(a[f],a[f],f),e===!1)break}}),a.fn.extend({iz:function(b){var c=a();return this.forEach(function(d){a(d).is(b)&&c.push(d)}),c},iznt:function(a){return this.not(a)},haz:function(a){return this.has(a)},haznt:function(b){var c=a();return this.forEach(function(d){a(d).has(b)[0]||c.push(d)}),c},hazClass:function(b){var c=a();return this.forEach(function(d){a(d).hasClass(b)&&c.push(d)}),c},hazntClass:function(b){var c=a();return this.forEach(function(d){a(d).hasClass(b)||c.push(d)}),c},hazAttr:function(b){var c=a();return this.forEach(function(d){a(d).attr(b)&&c.push(d)}),c},hazntAttr:function(b){var c=a();return this.forEach(function(d){a(d).attr(b)||c.push(d)}),c},forEach:function(b,c){return a.forEach(this,b,c)}}),a.extend({eventStart:null,eventEnd:null,eventMove:null,eventCancel:null,gestureLength:30}),a(function(){window.navigator.pointerEnabled?(a.eventStart="pointerdown",a.eventEnd="pointerup",a.eventMove="pointermove",a.eventCancel="pointercancel"):window.navigator.msPointerEnabled?(a.eventStart="MSPointerDown",a.eventEnd="MSPointerUp",a.eventMove="MSPointerMove",a.eventCancel="MSPointerCancel"):"ontouchstart"in window?(a.eventStart="touchstart",a.eventEnd="touchend",a.eventMove="touchmove",a.eventCancel="touchcancel"):(a.eventStart="mousedown",a.eventEnd="click",a.eventMove="mousemove",a.eventCancel="mouseout")}),a.extend({isiPhone:/iphone/gim.test(navigator.userAgent),isiPad:/ipad/gim.test(navigator.userAgent),isiPod:/ipod/gim.test(navigator.userAgent),isiOS:/ip(hone|od|ad)/gim.test(navigator.userAgent),isAndroid:/android/gim.test(navigator.userAgent)&&!/trident/gim.test(navigator.userAgent),isWebOS:/webos/gim.test(navigator.userAgent),isBlackberry:/blackberry/gim.test(navigator.userAgent),isTouchEnabled:"createTouch"in document,isOnline:navigator.onLine,isStandalone:navigator.standalone,isiOS6:navigator.userAgent.match(/OS 6/i),isiOS7:navigator.userAgent.match(/OS 7/i),isWin:/trident/gim.test(navigator.userAgent),isWinPhone:/trident/gim.test(navigator.userAgent)&&/mobile/gim.test(navigator.userAgent),isIE10:navigator.userAgent.match(/msie 10/i),isIE11:navigator.userAgent.match(/msie 11/i),isWebkit:navigator.userAgent.match(/webkit/),isMobile:/mobile/gim.test(navigator.userAgent),isDesktop:!/mobile/gim.test(navigator.userAgent),isSafari:!/Chrome/gim.test(navigator.userAgent)&&/Safari/gim.test(navigator.userAgent)&&!/android/gim.test(navigator.userAgent),isChrome:/Chrome/gim.test(navigator.userAgent),isNativeAndroid:/android/i.test(navigator.userAgent)&&/webkit/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent)});var b={},c,d,e,f=750,g=150,h;function i(a){return"tagName"in a?a:a.parentNode}function j(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"left":"right":c-d>0?"up":"down"}function k(){if(h=null,b.last)try{b&&b.el&&(b.el.trigger("longtap"),b={})}catch(a){}}function l(){h&&clearTimeout(h),h=null}function m(){c&&clearTimeout(c),e&&clearTimeout(e),d&&clearTimeout(d),h&&clearTimeout(h),c=e=d=h=null,b={}}a(function(){var n,o,p=a(document.body),q=!1;p.on(a.eventStart,function(d){if(n=Date.now(),o=n-(b.last||n),d.originalEvent&&(d=d.originalEvent),window.navigator.msPointerEnabled||window.navigator.pointerEnabled){if(window&&window.jQuery&&a===window.jQuery){if(d.originalEvent&&!d.originalEvent.isPrimary)return}else if(!d.isPrimary)return;d=d.originalEvent?d.originalEvent:d,p.on("MSHoldVisual",function(a){a.preventDefault()}),b.el=a(i(d.target)),c&&clearTimeout(c),b.x1=d.pageX,b.y1=d.pageY,q=!1}else"mousedown"===a.eventStart?(b.el=a(i(d.target)),c&&clearTimeout(c),b.x1=d.pageX,b.y1=d.pageY,q=!1):1===d.touches.length&&(b.el=a(i(d.touches[0].target)),c&&clearTimeout(c),b.x1=d.touches[0].pageX,b.y1=d.touches[0].pageY,q=2===d.targetTouches.length?!0:!1);o>0&&250>=o&&(b.isDoubleTap=!0),b.last=n,h=setTimeout(k,f)}),p.on(a.eventMove,function(f){if(f.originalEvent&&(f=f.originalEvent),window.navigator.msPointerEnabled){if(window&&window.jQuery&&a===window.jQuery){if(f.originalEvent&&!f.originalEvent.isPrimary)return}else if(!f.isPrimary)return;f=f.originalEvent?f.originalEvent:f,l(),b.x2=f.pageX,b.y2=f.pageY}else l(),"mousemove"===a.eventMove?(b.x2=f.pageX,b.y2=f.pageY):1===f.touches.length&&(b.x2=f.touches[0].pageX,b.y2=f.touches[0].pageY);if(a.isAndroid){if(a.gestureLength=10,!b.el)return;b.x2&&Math.abs(b.x1-b.x2)>a.gestureLength||b.y2&&Math.abs(b.y1-b.y2)>a.gestureLength?d=setTimeout(function(){f.preventDefault(),b&&b.el&&(b.el.trigger("swipe"),b.el.trigger("swipe"+j(b.x1,b.x2,b.y1,b.y2)),b={})},0):"last"in b&&(e=setTimeout(function(){b&&b.el&&b.el.trigger("tap"),b&&b.isDoubleTap?b&&b.el&&(b.el.trigger("doubletap"),b={}):c=setTimeout(function(){return c=null,b&&b.el?(b.el.trigger("singletap"),b={},!1):void 0},g)},0))}}),p.on(a.eventEnd,function(f){if(window.navigator.msPointerEnabled)if(window&&window.jQuery&&a===window.jQuery){if(f.originalEvent&&!f.originalEvent.isPrimary)return}else if(!f.isPrimary)return;l(),b.el&&(b.x2&&Math.abs(b.x1-b.x2)>a.gestureLength||b.y2&&Math.abs(b.y1-b.y2)>a.gestureLength?d=setTimeout(function(){b&&b.el&&(b.el.trigger("swipe"),b.el.trigger("swipe"+j(b.x1,b.x2,b.y1,b.y2)),b={})},0):"last"in b&&(e=setTimeout(function(){b&&b.el&&b.el.trigger("tap"),b&&b.isDoubleTap?b&&b.el&&(b.el.trigger("doubletap"),b={}):c=setTimeout(function(){return c=null,b&&b.el?(b.el.trigger("singletap"),b={},!1):void 0},g)},0)))}),p.on("touchcancel",m)}),["swipe","swipeleft","swiperight","swipeup","swipedown","doubletap","tap","singletap","longtap"].forEach(function(b){a.fn.extend({method:function(a){return this.on(b,a)}})}),a.extend({UIDesktopCompat:function(){a.isDesktop&&a.isSafari?a("body").addClass("isiOS").addClass("isDesktopSafari"):a.isDesktop&&a.isChrome&&a("body").addClass("isAndroid").addClass("isDesktopChrome")}}),a.extend({browserVersion:function(){var a=navigator.appName,b=navigator.userAgent,c,d=b.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return d&&null!==(c=b.match(/version\/([\.\d]+)/i))&&(d[2]=c[1]),d=d?[d[1],d[2]]:[a,navigator.appVersion,"-?"],d[1]}}),a(function(){a.body=a("body"),a.isWin?a.body.addClass("isWindows"):a.isiOS?a.body.addClass("isiOS"):a.isAndroid&&a.body.addClass("isAndroid"),a.isSafari&&6===parseInt(a.browserVersion(),10)&&a.body.addClass("isSafari6"),a.UIDesktopCompat()}),a(function(){a.body=a("body"),a.body[0].classList.contains("splitlayout")||a("body").prepend("<nav id='global-nav'></nav>"),a.body[0].classList.contains("splitlayout")&&window.innerWidth<768&&a("meta[name=viewport]").attr("content","width=device-width, initial-scale=0.45, maximum-scale=2, user-scalable=yes"),a("h1").each(function(a,b){b.nextElementSibling&&"A"===b.nextElementSibling.nodeName&&b.classList.add("buttonOnRight")}),a(".toolbar").prev("article").addClass("has-toolbar")}),a.extend({subscriptions:{},subscribe:function(b,c){a.subscriptions[b]||(a.subscriptions[b]=[]);var d=a.Uuid();return a.subscriptions[b].push({token:d,callback:c}),d},unsubscribe:function(b){setTimeout(function(){for(var c in a.subscriptions)if(a.subscriptions[c])for(var d=0,e=a.subscriptions[c].length;e>d;d++)if(a.subscriptions[c][d].token===b)return a.subscriptions[c].splice(d,1),b;return!1})},publish:function(b,c){return a.subscriptions[b]?(setTimeout(function(){var d=a.subscriptions[b]?a.subscriptions[b].length:0;while(d--)a.subscriptions[b][d].callback(b,c);return!0}),!0):!1}});function n(b){var c,d;"transition"in document.body.style?c="transition-duration":"-webkit-transition"in document.body.style&&(c="-webkit-transition-duration");function e(a){return/m/.test(a)?parseFloat(a):/s/.test(a)?100*parseFloat(a):void 0}d=e(a("article").eq(0).css(c)),setTimeout(function(){a(b).trigger({type:"navigationend"})},d)}a.extend({UITrackHashNavigation:function(b,c){b=b||!0,a.UISetHashOnUrl(a.UINavigationHistory[a.UINavigationHistory.length-1],c)},UISetHashOnUrl:function(b,c){c=c||"#/";var d;d=/^#/.test(b)?c+b.split("#")[1]:c+b,a.isAndroid?(/#/.test(b)&&(b=b.split("#")[1]),/\//.test(b)&&(b=b.split("/")[1]),window.location.hash="#/"+b):window.history.replaceState("Object","Title",d)},UIGoBackToArticle:function(b){var c=a.UINavigationHistory.indexOf(b),d=a("article.current"),e=a(b),f,g;0===a.UINavigationHistory.length&&(e=a("article:first-of-type"),a.UINavigationHistory.push("#"+e[0].id));var h;h=a.UINavigationHistory.length>1?a.UINavigationHistory.splice(c+1):a("article.previous"),a.publish("chui/navigateBack/leave",d[0].id),a.publish("chui/navigateBack/enter",e[0].id),d[0].scrollTop=0,e[0].scrollTop=0,h.length&&a.each(h,function(b,c){a(c).removeClass("previous").addClass("next"),a(c).prev().removeClass("previous").addClass("next")}),f=d.next().hazClass("toolbar"),g=e.next().hazClass("toolbar"),e.removeClass("previous next").addClass("current"),e.prev().removeClass("previous next").addClass("current"),g.removeClass("previous next").addClass("current"),d.removeClass("current").addClass("next"),d.prev().removeClass("current").addClass("next"),f.removeClass("current").addClass("next"),a(".toolbar.previous").removeClass("previous").addClass("next"),a.UISetHashOnUrl(a.UINavigationHistory[a.UINavigationHistory.length-1]),n(e)},UIGoBack:function(){var b=a.UINavigationHistory.length,c=a("article.current"),d=a(a.UINavigationHistory[b-2]),e,f;0===b&&(d=a("article:first-of-type"),a.UINavigationHistory.push("#"+d[0].id)),a.publish("chui/navigateBack/leave",c[0].id),a.publish("chui/navigateBack/enter",d[0].id),c[0].scrollTop=0,d[0].scrollTop=0,e=c.next().hazClass("toolbar"),f=d.next().hazClass("toolbar"),d.removeClass("previous").addClass("current"),d.prev().removeClass("previous").addClass("current"),f.removeClass("previous").addClass("current"),c.removeClass("current").addClass("next"),c.prev().removeClass("current").addClass("next"),e.removeClass("current").addClass("next"),a.UISetHashOnUrl(a.UINavigationHistory[b-2]),1!==a.UINavigationHistory.length&&a.UINavigationHistory.pop()},isNavigating:!1,UIGoToArticle:function(b){if(!a.isNavigating){a.isNavigating=!0;var c=a("article.current"),d=c.prev();b=a(b);var e="#"+b[0].id,f=b.prev(),g,h,i="next previous";a.publish("chui/navigate/leave",c[0].id),a.UINavigationHistory.push(e),a.publish("chui/navigate/enter",b[0].id),c[0].scrollTop=0,b[0].scrollTop=0,g=c.next().hazClass("toolbar"),h=b.next().hazClass("toolbar"),c.removeClass("current").addClass("previous"),d.removeClass("current").addClass("previous"),g.removeClass("current").addClass("previous"),b.removeClass(i).addClass("current"),f.removeClass(i).addClass("current"),h.removeClass(i).addClass("current"),a.UISetHashOnUrl(b[0].id),setTimeout(function(){a.isNavigating=!1},500),n(b)}}}),a(function(){a.extend({UINavigationHistory:["#"+a("article").eq(0).attr("id")]}),a("nav:not(#global-nav)").each(function(b,c){a("body")[0].classList.contains("splitlayout")||c.classList.add(0===b?"current":"next")}),a("article").each(function(b,c){a("body")[0].classList.contains("splitlayout")||a("body")[0].classList.contains("slide-out-app")||c.classList.add(0===b?"current":"next")}),a("body").on("singletap","a.back",function(){this.classList.contains("back")&&a.UIGoBack()}),a("body").on("singletap doubletap","li",function(){if(!a.isNavigating&&this.hasAttribute("data-goto")&&this.getAttribute("data-goto")&&document.getElementById(this.getAttribute("data-goto"))&&!a(this).parent()[0].classList.contains("deletable")){var b="#"+this.getAttribute("data-goto");a(b).addClass("navigable");var c=a(b);a.UIGoToArticle(c)}}),a("li[data-goto]").each(function(b,c){a(c).closest("article").addClass("navigable");var d="#"+c.getAttribute("data-goto");a(d).addClass("navigable")}),a("article").eq(1)[0]&&a.UISetHashOnUrl(a("article").eq(0)[0].id),a("nav").on(a.eventStart,function(a){a.preventDefault()})}),a(function(){a("body").on("singletap",".button",function(){var b=a(this);b.parent(".segmented")[0]||b.parent(".tabbar")[0]||(b.addClass("selected"),setTimeout(function(){b.removeClass("selected")},500))})}),a.fn.extend({UIBlock:function(b){return b=b?" style='opacity:"+b+"'":" style='opacity: .5;'",a(this).before("<div class='mask'"+b+"></div>"),a("article.current").attr("aria-hidden",!0),this},UIUnblock:function(){return a(".mask").remove(),a("article.current").removeAttr("aria-hidden"),this}}),a.fn.extend({UICenter:function(){if(this[0]){var b=a(this),c=b.parent(),d;d="absolute"!==b.css("position")?"relative":"absolute";var e,f,g,h;"absolute"===d?(e=b[0].clientHeight,f=b[0].clientWidth,g=c[0].clientHeight,h=c[0].clientWidth):(e=parseInt(b.css("height"),10),f=parseInt(b.css("width"),10),g=parseInt(c.css("height"),10),h=parseInt(c.css("width"),10));var i,j;"body"===c[0].nodeName?(i=window.innerHeight/2+window.pageYOffset-e/2+"px",j=window.innerWidth/2-f/2+"px"):(i=g/2-e/2+"px",j=h/2-f/2+"px"),"absolute"!==d&&(j=0),b.css({left:j,top:i})}}}),a.fn.extend({UIBusy:function(b){b=b||{};var c=this,d=b.color||"#000",e=b.size||"80px",f=b&&"right"===b.position?"align-flush":null,g=b.duration||"2s",h,i=function(){var b={"-webkit-animation-duration":g};return h=a('<span class="busy"></span>'),a(h).css({"background-color":d,height:e,width:e}),a(h).css(b),a(h).attr("role","progressbar"),f&&a(h).addClass(f),c.append(h),this},j=function(){var b={"-webkit-animation-duration":g};return h=a('<div class="busy"><div></div><div></div></div>'),a(h).css({height:e,width:e,"background-image":"url(\"data:image/svg+xml;utf8,<svg xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' version='1.1' x='0px' y='0px' width='400px' height='400px' viewBox='0 0 400 400' enable-background='new 0 0 400 400' xml:space='preserve'><circle fill='none' stroke='"+d+"' stroke-width='20' stroke-miterlimit='10' cx='199' cy='199' r='174'/></svg>\")"}),a(h).css(b),a(h).attr("role","progressbar"),a(h).innerHTML="<div></div><div></div>",f&&a(h).addClass("align-"+f),c.append(h),this},k=function(){return h=a('<progress class="busy"></progress>'),a(h).css({color:d}),a(h).attr("role","progressbar"),a(h).addClass("win-ring"),f&&a(h).addClass("align-"+f),c.append(h),this};a.isWin?k(b):a.isAndroid||a.isChrome?j(b):(a.isiOS||a.isSafari)&&i(b)}}),a.extend({UIPopup:function(b){if(b){var c=b.id||a.Uuid(),d=b.title?"<header><h1>"+b.title+"</h1></header>":"",e=b.message?'<p role="note">'+b.message+"</p>":"",f=b.cancelButton?'<a href="javascript:void(null)" class="button cancel" role="button">'+b.cancelButton+"</a>":"",g=b.continueButton?'<a href="javascript:void(null)" class="button continue" role="button">'+b.continueButton+"</a>":"",h=b.callback||a.noop,i=b.empty?' style="padding: 40px 0;" ':"",j,k;b.empty?(j="",k=""):(j='<div class="panel">',k="</div>");var l='<div class="popup closed" role="alertdialog" id="'+c+'"'+i+">"+j+d+e+"<footer>"+f+g+"</footer>"+k+"</div>";a("body").append(l),h&&g&&a(".popup").find(".continue").on(a.eventStart,function(){a(".popup").UIPopupClose(),h.call(h)}),a.UICenterPopup(),setTimeout(function(){a("body").find(".popup").removeClass("closed")},200),a("body").find(".popup").UIBlock("0.5");var m=a.eventStart+" singletap "+a.eventEnd;a(".mask").on(m,function(a){a.stopPropagation()})}},UICenterPopup:function(){var b=a(".popup");if(b[0]){var c=window.innerHeight/2+window.pageYOffset-b[0].clientHeight/2+"px",d;d=320===window.innerWidth?"10px":Math.floor((window.innerWidth-318)/2)+"px",b.css(a.isWin?{top:c}:{left:d,top:c})}}}),a.fn.extend({UIPopupClose:function(){this[0].classList.contains("popup")&&(a(this).UIUnblock(),a(this).remove())}}),a(function(){a("body").on(a.eventStart,".cancel",function(){a(this).closest(".popup")[0]&&a(this).closest(".popup").UIPopupClose()}),window.onresize=function(){a.UICenterPopup()}}),a.fn.extend({UIPopover:function(b){if(!b)return[];var c=a(this),d;this[0].id?d=this[0].id:(d=a.Uuid(),c.attr("id",d));var e=b.id?b.id:a.Uuid(),f=b.title?"<header><h1>"+b.title+"</h1></header>":"",g=b.callback?b.callback:a.noop,h='<div class="popover" id="'+e+'">'+f+"<section></section></div>",i=function(b){var c=a(b).offset(),d=c.left,e,f,g=a(".popover"),h=g.offset();e=h.left,f=c.top+a(b)[0].clientHeight,g.css(g.width()+c.left>window.innerWidth?{left:window.innerWidth-g.width()-20+"px",top:f+20+"px"}:{left:d+"px",top:f+20+"px"})};a(this).on(a.eventStart,function(){var b=this;a(this).addClass("selected"),setTimeout(function(){a(b).removeClass("selected")},1e3),a("body").append(h),a(".popover").UIBlock(".5");var c="singletap";a.isWin&&a.isDesktop&&(c=a.eventStart+" singletap "+a.eventEnd),a(".mask").on(c,function(a){a.preventDefault(),a.stopPropagation()}),a(".popover").data("triggerEl",d),a.isWin?(i(b),a(".popover").addClass("open")):(a(".popover").addClass("open"),setTimeout(function(){i(b)})),g.call(g,b)})}}),a.extend({UIAlignPopover:function(){var b=a(".popover");if(b.length){var c=b.data("triggerEl"),d=a("#"+c).offset(),e=d.left;b.css(a(b).width()+d.left>window.innerWidth?{left:window.innerWidth-a(b).width()-20+"px"}:{left:e+"px"})}}}),a.extend({UIPopoverClose:function(){a("body").UIUnblock(),a(".popover").css("visibility","hidden"),setTimeout(function(){a(".popover").remove()},10)}}),a(function(){window.onresize=function(){a.UIAlignPopover()};var b=a.eventStart+" singletap "+a.eventEnd;a("body").on(b,".mask",function(b){if(a(".popover")[0])a.UIPopoverClose();else{if(b&&1===b.nodeType)return;b.stopPropogation()}})}),a.fn.extend({UISegmented:function(b){if(!this.hasClass("paging")){var c=b&&b.callback?b.callback:a.noop,d;b&&b.selected&&(d=b.selected),b&&b.callback&&(c=b.callback),this.find("a").each(function(b,c){a(c).find("a").attr("role","radio"),0===d&&0===b&&(c.setAttribute("aria-checked","true"),c.classList.add("selected")),b===d&&(c.setAttribute("aria-checked","true"),c.classList.add("selected"))}),d||this.find(".selected")[0]||this.children().eq(0).addClass("selected"),this.on("singletap",".button",function(b){var d=a(this);this.parentNode.classList.contains("paging")||(d.siblings("a").removeClass("selected"),d.siblings("a").removeAttr("aria-checked"),d.addClass("selected"),d.attr("aria-checked",!0),c.call(this,b))})}}}),a.extend({UICreateSegmented:function(a){var b=a&&a.className?a.className:"",c=a&&a.labels?a.labels:[],d=a&&a.selected?a.selected:0,e=['<div class="segmented'];return b&&e.push(" "+b),e.push('">'),c.forEach(function(a,b){e.push('<a role="radio" class="button'),e.push(d===b?' selected" aria-checked="true"':'"'),e.push(">"),e.push(a),e.push("</a>")}),e.push("</div>"),e.join("")}}),a(function(){a(".segmented").UISegmented()}),a.fn.extend({UIPanelToggle:function(b,c){var d,e=0;e=this.children().hazClass("selected").index()||0,b instanceof Array?d=b.children("div"):"string"==typeof b&&(d=a(b).children("div")),d.eq(e).siblings().css({display:"none"}),c&&c.apply(this,arguments),this.on(a.eventEnd,"a",function(){d.eq(a(this).index()).css({display:"block"}).siblings().css("display","none")}),this.on("singletap",".button",function(){var b=a(this);this.parentNode.classList.contains("paging")||(b.siblings("a").removeClass("selected"),b.siblings("a").removeAttr("aria-checked"),b.addClass("selected"),b.attr("aria-checked",!0))})}}),a.extend({UIPaging:function(){var b=a(".segmented.paging").closest("nav").next();window&&window.jQuery&&a===window.jQuery?a(".segmented.paging").hasClass("horizontal")?b.addClass("horizontal"):a(".segmented.paging").hasClass("vertical")&&b.addClass("vertical"):a(".segmented.paging").hasClass("horizontal")[0]?b.addClass("horizontal"):a(".segmented.paging").hasClass("vertical")[0]&&b.addClass("vertical"),b.children().eq(0).addClass("current"),b.children().eq(0).siblings().addClass("next");var c=function(){return b.children().length};a(".segmented.paging").on(a.eventStart,".button:first-of-type",function(){if(1!==c()){var d=a(this);d.next().removeClass("selected"),d.addClass("selected");var e;e=a("section.current"),0===e.index()?(e.removeClass("current"),b.children().eq(c()-1).addClass("current").removeClass("next"),b.children().eq(c()-1).siblings().removeClass("next").addClass("previous")):(e.removeClass("current").addClass("next"),e.prev().removeClass("previous").addClass("current")),setTimeout(function(){d.removeClass("selected")},250)}}),a(".segmented.paging").on(a.eventStart,".button:last-of-type",function(){if(1!==c()){var d=a(this);d.prev().removeClass("selected"),d.addClass("selected");var e;this.classList.contains("disabled")||(e=a("section.current"),e.index()===c()-1?(e.removeClass("current"),b.children().eq(0).addClass("current").removeClass("previous"),b.children().eq(0).siblings().removeClass("previous").addClass("next")):(e.removeClass("current").addClass("previous"),e.next().removeClass("next").addClass("current")),setTimeout(function(){d.removeClass("selected")},250))}})}}),a.extend({UIDeletable:function(b){if(b&&b.list&&!(!b instanceof Array)){var c=a(b.list),d=b.editLabel||"Edit",e=b.doneLabel||"Done",f=b.deleteLabel||"Delete",g=b.placement||"right",h=b.callback||a.noop,i,j,k,l,m="swiperight";if("rtl"===a("html").attr("dir")&&(m="swipeleft"),a.isWin&&(f=""),!c[0].classList.contains("deletable")){var n=a("li").eq(1)[0].clientHeight;i=a.concat('<a href="javascript:void(null)" class="button delete">',f,"</a>"),j=a.concat('<a href="javascript:void(null)" class="button edit">',d,"</a>"),k='<span class="deletion-indicator"></span>',"left"===g?c.closest("article").prev().prepend(j):(c.closest("article").prev().append(j),c.closest("article").prev().find("h1").addClass("buttonOnRight"),c.closest("article").prev().find(".edit").addClass("align-flush"),l=c.closest("article").prev().find(".edit")),c.find("li").prepend(k),c.find("li").append(i);var o=function(b,c,f){var g;a.isiOS?g="100px":a.isAndroid&&(g="140px"),a(function(){f.on("singletap",function(){var b=this;this.classList.contains("edit")?(c.addClass("deletable"),setTimeout(function(){b.classList.remove("edit"),b.classList.add("done"),a(b).text(e),a(c).addClass("showIndicators")})):this.classList.contains("done")&&(c.removeClass("deletable"),setTimeout(function(){b.classList.remove("done"),b.classList.add("edit"),a(b).text(d),a(c).removeClass("showIndicators"),a(c).find("li").removeClass("selected")}))}),a(c).on("singletap",".deletion-indicator",function(){return a(this).parent("li").hasClass("selected")?void a(this).parent("li").removeClass("selected"):void a(this).parent("li").addClass("selected")}),(a.isiOS||a.isSafari)&&a(c).on(m,"li",function(){a(this).removeClass("selected")}),a(c).on("singletap",".delete",function(){var c=this,d="-1000%";"rtl"===a("html").attr("dir")&&(d="1000%"),a(this).siblings().css({"-webkit-transform":"translate3d("+d+",0,0)","-webkit-transition":"all 1s ease-out"}),setTimeout(function(){b.call(b,c),a(c).parent().remove()},500)})})};return o(h,c,l)}}}}),a.fn.extend({UISelectList:function(b){var c=b&&b.name?b.name:a.Uuid(),d=this[0];return d&&!a(d).hasClass("select")&&this.addClass("select"),d?(d.classList.add("select"),a(d).find("li").forEach(function(d,e){d.setAttribute("role","radio"),b&&b.selected===e?(d.setAttribute("aria-checked","true"),d.classList.add("selected"),a(d).find("input")[0]?a(d).find("input").attr("checked","checked"):a(d).append('<input type="radio" checked="checked" name="'+c+'">')):a(d).find("input")[0]||a(d).append('<input type="radio" name="'+c+'">')}),void a(d).on("singletap","li",function(){var c=this;a(c).siblings("li").removeClass("selected"),a(c).siblings("li").removeAttr("aria-checked"),a(c).siblings("li").find("input").removeAttr("checked"),a(c).addClass("selected"),c.setAttribute("aria-checked",!0),a(c).find("input").attr("checked","checked"),b&&b.callback&&b.callback.apply(this,arguments)})):[]}}),a.extend({UISheet:function(b){var c=a.Uuid(),d="",e="";b&&(c=b.id?b.id:c,d=b.listClass?" "+b.listClass:"",e=' style="background-color:'+b.background+';" '||"");var f='<div id="'+c+'" class="sheet'+d+'"><div class="handle"></div><section class="scroller-vertical"></section></div>';a("body").append(f),a(".sheet .handle").on(a.eventStart,function(){a.UIHideSheet()})},UIShowSheet:function(){a("article.current").addClass("blurred"),a.isAndroid||a.isChrome?(a(".sheet").css("display","block"),setTimeout(function(){a(".sheet").addClass("opened")},20)):a(".sheet").addClass("opened")},UIHideSheet:function(){a(".sheet").removeClass("opened"),a("article.current").addClass("removeBlurSlow"),setTimeout(function(){a("article").removeClass("blurred"),a("article").removeClass("removeBlurSlow")},500)}}),a.extend({UISlideout:function(b){var c=a("<a class='button slide-out-button' href='javascript:void(null)'></a>"),d='<div class="slide-out"><section></section></div>';a("article").removeClass("next"),a("article").removeClass("current"),a("article").prev().removeClass("next"),a("article").prev().removeClass("current"),b=b||"left",a("body").append(d),a("body").addClass("slide-out-app"),a("article:first-of-type").addClass("show"),a("article:first-of-type").prev().addClass("show"),a("#global-nav").append(c),a(".slide-out-button").on(a.eventStart,function(){a(".slide-out").toggleClass("open")}),a(".slide-out").on("singletap","li",function(){var b="#"+a(this).attr("data-show-article");a.UINavigationHistory[0]=b,a.UISetHashOnUrl(b),a.publish("chui/navigate/leave",a("article.show")[0].id),a.publish("chui/navigate/enter",b),a(".slide-out").removeClass("open"),a("article").removeClass("show"),a("article").prev().removeClass("show"),a(b).addClass("show"),a(b).prev().addClass("show")})}}),a.extend(a.UISlideout,{populate:function(b){var c=a(".slide-out");if(c[0]&&a.isArray(b)){c.find("section").append('<ul class="list"></ul>');var d=c.find("ul");b.forEach(function(a){for(var b in a)d.append("header"===b?'<li class="slideout-header"><h2>'+a[b]+"</h2></li>":'<li data-show-article="'+b+'"><h3>'+a[b]+"</h3></li>")})}}}),a.fn.extend({UIStepper:function(b){if(!b)return[];if(!b.start)return[];if(!b.end)return[];var c=a(this),d=b.start,e=b.end,f=b.defaultValue?b.defaultValue:b.start,g="+",h="-";a.isWin&&(g="",h="");var i='<a href="javascript:void(null)" class="button decrease">'+h+"</a>",j="<label>"+f+'</label><input type="text" value="'+f+'">',k='<a href="javascript:void(null)" class="button increase">'+g+"</a>";c.append(i+j+k),c.data("ui-value",{start:d,end:e,defaultValue:f});var l=function(){var b=c.find("input").val(),d=c.data("ui-value"),e=d.start,f;e>=b?a(this).addClass("disabled"):(f=Number(b)-1,c.find(".button:last-of-type").removeClass("disabled"),c.find("label").text(f),c.find("input")[0].value=f,b===e&&a(this).addClass("disabled"))},m=function(){var b=c.find("input").val(),d=c.data("ui-value"),e=d.end,f;b>=e?a(this).addClass("disabled"):(f=Number(b)+1,c.find(".button:first-of-type").removeClass("disabled"),c.find("label").text(f),c.find("input")[0].value=f,b===e&&a(this).addClass("disabled"))};c.find(".button:first-of-type").on("singletap",function(){l.call(this,c)}),c.find(".button:last-of-type").on("singletap",function(){m.call(this,c)})}}),a.extend({UIResetStepper:function(a){var b=a.data("ui-value").defaultValue;a.find("label").html(b),a.find("input")[0].value=b}}),a.fn.extend({UISwitch:function(){var b=!1;this.forEach(function(c,d){c.setAttribute("role","checkbox"),a(c).data("ui-setup")!==!0&&(c.querySelector("input")||c.insertAdjacentHTML("afterBegin",'<input type="checkbox">'),c.classList.contains("on")&&c.querySelector("input").setAttribute("checked","checked"),c.querySelector("em")&&(b=!0),b||c.insertAdjacentHTML("afterBegin","<em></em>"),a(c).on("singletap",function(){var a=c.querySelector("input");c.classList.contains("on")?(c.classList.remove("on"),c.removeAttribute("aria-checked"),a.removeAttribute("checked")):(c.classList.add("on"),a.setAttribute("checked","checked"),c.setAttribute("aria-checked",!0))}),a(c).on("swipeleft",function(){var a=c.querySelector("input");c.classList.contains("on")&&(c.classList.remove("on"),c.removeAttribute("aria-checked"),a.removeAttribute("checked"))}),a(c).on("swiperight",function(){var a=c.querySelector("input");c.classList.contains("on")||(c.classList.add("on"),a.setAttribute("checked","checked"),c.setAttribute("aria-checked",!0))}),a(c).data("ui-setup",!0))})}}),a.extend({UICreateSwitch:function(b){var c=b?b.id:a.Uuid(),d=b&&b.name?' name="'+b.name+'"':"",e=b&&b.value?' value="'+b.value+'"':"",f=b&&"on"===b.state?" "+b.state:"",g=b&&"on"===b.state?' checked="checked"':"",h=a.concat('<span class="switch',f,'" id="',c,'"><em></em>','<input type="checkbox"',d,g,e,"></span>");return a(h)}}),a(function(){a(".switch").UISwitch()}),document.addEventListener("touchstart",function(a){var b=a.target,c=0;for(c=0;10>c;c+=1)null!==b&&(void 0!==b.className&&b.className.match("navigable")&&(0===b.scrollTop?b.scrollTop=1:b.scrollTop+b.offsetHeight===b.scrollHeight&&(b.scrollTop=b.scrollTop-1)),b=b.parentNode)}),a.extend({UITabbar:function(b){if(b){a("body").addClass("hasTabBar"),a.isiOS6&&a("body").addClass("isiOS6");for(var c=b.id||a.Uuid(),d=b.selected||"",e='<div class="tabbar" id="'+c+'">',f=a.isiOS||a.isSafari?'<span class="icon"></span>':"",g=0;g<b.tabs;g++)e+='<a class="button '+b.icons[g],d===g+1&&(e+=" selected"),e+='">'+f+"<label>"+b.labels[g]+"</label></a>";e+="</div>",a("body").append(e),a("nav").removeClass("current").addClass("next"),a("nav").eq(d).removeClass("next").addClass("current"),a("article").removeClass("current").addClass("next"),a("article").eq(d-1).removeClass("next").addClass("current"),a("body").find(".tabbar").on("singletap",".button",function(){var b=this,c,d;a.publish("chui/navigate/leave",a("article.current")[0].id),b.classList.add("selected"),a(this).siblings("a").removeClass("selected"),c=a(this).index(),a("article.previous").removeClass("previous").addClass("next"),a("nav.previous").removeClass("previous").addClass("next"),a("article.current").removeClass("current").addClass("next"),a("nav.current").removeClass("current").addClass("next"),d=a("article").eq(c)[0].id,a.publish("chui/navigate/enter",d),window&&window.jQuery?a("article").each(function(b,c){a(c).scrollTop(0)}):a("article").eq(c).siblings("article").forEach(function(a){a.scrollTop=0}),a.UISetHashOnUrl("#"+d),a.UINavigationHistory[0]==="#"+d?a.UINavigationHistory=[a.UINavigationHistory[0]]:1===a.UINavigationHistory.length?a.UINavigationHistory[0]!=="#"+d&&a.UINavigationHistory.push("#"+d):3===a.UINavigationHistory.length?a.UINavigationHistory.pop():a.UINavigationHistory[1]="#"+d,a("article").eq(c).removeClass("next").addClass("current"),a("nav").eq(c+1).removeClass("next").addClass("current")})}}}),a.extend({templates:{},template:function(a,b){var c;b=b||"data",c=/\[\[=([\s\S]+?)\]\]/g;var d=new Function(b,"var p=[];p.push('"+a.replace(/[\r\t\n]/g," ").split("'").join("\\'").replace(c,"',$1,'").split("[[").join("');").split("]]").join("p.push('")+"');return p.join('');");return d}})}(window.jQuery);
//# sourceMappingURL=chui-3.5.1.min.map